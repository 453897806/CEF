diff --git chrome/test/BUILD.gn chrome/test/BUILD.gn
index 4af881eba8a7..cf37d7b78107 100644
--- chrome/test/BUILD.gn
+++ chrome/test/BUILD.gn
@@ -4729,7 +4729,7 @@ test("unit_tests") {
   if (use_gio) {
     configs += [ "//build/linux:gio_config" ]
   }
-  if (!is_chromeos && !use_ozone && is_linux) {
+  if (!is_chromeos && !use_ozone && is_linux && use_gtk) {
     deps += [ "//chrome/browser/ui/libgtkui" ]
   }
 
@@ -5717,7 +5717,7 @@ if (!is_android) {
           # suites, it seems like one or another starts timing out too.
           "../browser/ui/views/keyboard_access_browsertest.cc",
         ]
-        if (!use_ozone) {
+        if (!use_ozone && use_gtk) {
           sources += [
             "../browser/ui/libgtkui/select_file_dialog_interactive_uitest.cc",
           ]
